extends layouts/_layout.pug

block variables
	- var activePage = 'page-contents'
	// - var activeGroup = 'tables'

block title
	if content
		title Modifier un contenu - Tumeplay
	else
		title Créer un contenu - Tumeplay

block content
	.app-title
		div
			h1
				i.fa.fa-book
				|  Contenus
			p Liste des contenus accessibles dans la section "Informations"

		ul.app-breadcrumb.breadcrumb.side
			li.breadcrumb-item
				i.fa.fa-home.fa-lg
			li.breadcrumb-item.active
				a(href="#") Contenus

	.row
		.col-md-12
			include ./forms/content/_form.pug
block specific-js
	// Data table plugin
	script(type='text/javascript').

		function checkLength(field)
		{
			var maxLength = $(field).data("maxlength");
			var currentText   = $(field).val();
		    var currentLength = $( '<div>' + currentText + '</div>' ).text().length;
			var counter = $(field).parent().find('.limited-counter').first();
			
		    if( currentLength >= maxLength )
		    {
				if( !$(counter).hasClass('counter-danger') )
				{
					$(counter).addClass('counter-danger');
				}
		    }else
		    {
		    	$(counter).removeClass('counter-danger');    
		    }
		    $(counter).text( parseInt(maxLength - currentLength) + ' caractère(s) restant(s).');
		}
		
		
		$('.limited-length').on("input", function(){
			checkLength($(this));
		});
		$('.limited-length').each(function() {
			checkLength($(this));
		});